{#
SPDX-FileCopyrightText: 2023 Slavi Pantaleev
SPDX-FileCopyrightText: 2023 - 2025 Meier Lukas
SPDX-FileCopyrightText: 2025 Suguru Hirahara

SPDX-License-Identifier: Apache-2.0
#}

{#
  See: https://vikunja.io/docs/config-options/
#}

UID={{ vikunja_uid }}
GID={{ vikunja_gid }}

VIKUNJA_LOG_LEVEL={{ vikunja_environment_variables_log_level }}
VIKUNJA_LOG_FORMAT={{ vikunja_environment_variables_log_format }}

VIKUNJA_SERVICE_JWTSECRET={{ vikunja_environment_variables_service_jwtsecret }}
VIKUNJA_SERVICE_PUBLICURL={{ vikunja_environment_variables_service_publicurl }}
VIKUNJA_SERVICE_ENABLEREGISTRATION={{ vikunja_environment_variables_service_enableregistration | to_json }}

{% if vikunja_database_type == 'sqlite' %}
VIKUNJA_DATABASE_TYPE=sqlite
VIKUNJA_DATABASE_PATH=database/{{ vikunja_database_file }}
{% endif %}

{% if vikunja_database_type == 'mysql' %}
VIKUNJA_DATABASE_TYPE=mysql
VIKUNJA_DATABASE_USER={{ vikunja_database_mysql_username }}
VIKUNJA_DATABASE_PASSWORD={{ vikunja_database_mysql_password }}
VIKUNJA_DATABASE_HOST={{ vikunja_database_mysql_hostname }}:{{ vikunja_database_mysql_port }}
VIKUNJA_DATABASE_DATABASE={{ vikunja_database_name }}
{% endif %}

{% if vikunja_database_type == 'postgres' %}
VIKUNJA_DATABASE_TYPE=postgres
VIKUNJA_DATABASE_USER={{ vikunja_database_postgres_username }}
VIKUNJA_DATABASE_PASSWORD={{ vikunja_database_postgres_password }}
VIKUNJA_DATABASE_HOST={{ vikunja_database_postgres_hostname }}:{{ vikunja_database_postgres_port }}
VIKUNJA_DATABASE_SSLMODE={{ vikunja_database_postgres_sslmode }}
VIKUNJA_DATABASE_DATABASE={{ vikunja_database_name }}
{% endif %}

{% if vikunja_redis_hostname %}
VIKUNJA_REDIS_ENABLED=true
VIKUNJA_REDIS_HOST={{ vikunja_redis_hostname }}:{{ vikunja_redis_port }}

{% if vikunja_redis_password %}
VIKUNJA_REDIS_PASSWORD={{ vikunja_redis_password }}
{% endif %}

VIKUNJA_REDIS_DB={{ vikunja_redis_database }}
{% endif %}

{% if vikunja_environment_variables_smtp_enabled %}
VIKUNJA_MAILER_ENABLED=true
VIKUNJA_MAILER_HOST={{ vikunja_environment_variables_smtp_host }}
VIKUNJA_MAILER_PORT={{ vikunja_environment_variables_smtp_port }}

{% if vikunja_environment_variables_smtp_user %}
VIKUNJA_MAILER_USERNAME={{ vikunja_environment_variables_smtp_user }}
{% endif %}

{% if vikunja_environment_variables_smtp_password %}
VIKUNJA_MAILER_PASSWORD={{ vikunja_environment_variables_smtp_password }}
{% endif %}

VIKUNJA_MAILER_FROMEMAIL={{ vikunja_environment_variables_smtp_from }}
VIKUNJA_MAILER_AUTHTYPE={{ vikunja_environment_variables_smtp_authtype }}
VIKUNJA_MAILER_SKIPTLSVERIFY={{ vikunja_environment_variables_skiptlsverify | to_json }}
VIKUNJA_MAILER_FORCESSL={{ vikunja_environment_variables_smtp_forcessl | to_json }}
{% endif %}

VIKUNJA_RATELIMIT_ENABLED={{ vikunja_environment_variables_ratelimit_enabled | to_json }}

OG_HTTP_PORT={{ vikunja_container_http_port }}
OG_HTTP_GIT_ENABLED={{ vikunja_environment_variables_http_git_enabled | to_json }}

OG_METRICS_ENABLED={{ vikunja_environment_variables_metrics_enabled | to_json }}
OG_SSH_GIT_ENABLED={{ vikunja_environment_variables_ssh_git_enabled | to_json }}

OG_SSH_PORT={{ vikunja_container_ssh_port }}

{{ vikunja_environment_variables_additional_variables }}
